---
title: Network Pentesting Methodology
date: 2022-09-25 12:37:00 -500 
categories: [PenTesting Methodology]
tags: [pentesting]
---

# Network Pentesting Methodology

1. [What is a Methodology](#what-is-a-methodology)
2. [Why You Should Have One](#why-you-should-have-one)
3. [Methodology Building Blocks](#methodology-building-blocks)
    - [Reconnaissance](#reconnaissance)
    - [Threat Modeling](#threat-modeling--vulnerability-analysis)
    - [Exploitation](#exploitation)
    - [Persistence/Post Exploitation](#persistence--post-exploitation)
4. [Conclusion](#conclusion)

## What is a Methodology
A methodology is simply a framework that you follow when conducting a pentest. It outlines the high level steps that the tester follows during an engagement.

## Why You Should Have One
It's important that each tester have a methodology that they follow or that they've created from their previous experiences. By standardizing the steps of each engagement it makes it easier for the tester to have more consistent tests and findings across multiple engagements.

## Methodology Building Blocks
From a high level there are four aspects of my methodology, please note this is my personal methodology, and it will vary from individual to individual. 

1. Reconnaissance
2. Threat Model & Vulnerability Analysis
3. Exploitation
4. Persistence & Post Exploitation

Lets take a look at each component and get a better idea of what each of them mean and how they work together

### Reconnaissance
Reconnaissance or Information Gathering is the initial phase of the technical aspects of the pentest. This phase includes gathering as much information about the target and this is done through the use of automated tools as well as manual techniques. The goal of this phase is to accumulate information and develop a better understanding of your target. Important points here would thins like available ports/services, if there are any applications available, how devices in the network communicate with each other, etc...

There are several tools and techniques that testers use during this phase, and we'll get into those at another time. But for now just remember - Recon is an extremely critical phase, something missed during this phase may result in a missed finding during the later phases. So make sure you do it right and don't rush through it. 

"Give me six hours to chop down a tree and I will spend the first four sharpening the axe." - Abraham Lincoln

Sharpen your axe!

### Threat Modeling & Vulnerability Analysis
This is phase where we try to decide what our next course of action will be, we'll see what attack avenues have a higher chance of success and try to prioritize our efforts to maximize our time and efficiency.

Since we've identified most or all of the available ports, services, or applications in our scope it's time to think about what our potential attack pathways might look like. Hopefully during our recon phase we identified some software or service versions, strange services on uncommon ports, or strange behaviors from services or applications that we can look further look into.

Although the goal is to find vulnerabilities and weaknesses in the network, we need to be tactful. Most penetration tests have a set time where testing is allowed, and we can't waste time going down every rabbit hole we come across. We need to understand which avenues will yield a higher rate of success, this phase helps manage that issue.

"We say:
Know the enemy and know yourself.
Your victory will be painless.
Know the weather and the field.
Your victory will be complete." - Art of War 10:5:14â€“18

### Exploitation
Now we get to the fun part, at least in my opinion, the actual exploitation of vulnerable services/applications. From our previous phases we should have identified several key pieces of information about our target, then ran through and modeling our potential avenues of attack, which brings us here - executing on our attack plan.

This can take on many forms depending on the target. It might a SQL injection on a web app that grant us remote command exec on the host, or could be a vulnerable service with a publicly available exploit. The main take-away here is that we are putting our attack plan to action and seeing where it takes us.

I usually include privilege escalation under the exploitation phase, but some may choose to make this a separate category entirely. It's important that once you've completed the exploitation phase you effectively start this process over again from the recon phase. Once you have RCE or a foothold on the machine, you need to re-assess all the new data points available to you. Internal hosts can sometimes have services only accessible from the local network, or maybe there are some more vulnerable installed applications that you could use to escalate your privileges on the machine. 

### Persistence & Post Exploitation
This phase does not always apply, but it's still good to have a section for it and understand when it does apply and the value it could add to your engagements. 

During this phase of the engagement our goal is maintain access in the network and obtain even more information, ideally things like passwords, hashes, other sensitive information. This would include things like the /etc/shadow file on Linux or the SAM file on Windows. Persistence techniques could include things like golden ticket attacks, creating backdoors, creating admin users, etc...

Long story short, we want to stay in the network as long as possible and gather as much juicy information as possible.

## Conclusion

In conclusion, every tester needs a methodology. They need to know how to work during each phase of their methodology, this means know your tools, know your manual techniques, and know your objectives for each phase.

I plan on doing more in depth posts about each phase and how I work through them and the tools/techniques I like using.

~ Pharo